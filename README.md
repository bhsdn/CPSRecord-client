# CPS Record Client

基于 Vue 3 + TypeScript + Element Plus 构建的 CPS 推广项目内容管理前端，配合后端 API 提供项目、子项目、内容类型以及口令的全流程管理能力。界面设计遵循 PRD.md 与 read-prd-documentation.md 中的交互规范，支持响应式布局与详细的操作提示，帮助非前端背景的同学也能快速上手。

## 功能概览

- **项目管理**：查看、搜索、创建、编辑、删除项目，展示项目总数与关键统计信息。
- **子项目管理**：按项目维度查看子项目列表，支持创建、编辑、软删除与排序调整。
- **内容管理**：配置内容类型、为子项目添加内容、追踪内容有效期并突出到期状态。
- **文字口令**：维护与更新口令，批量统计口令数量，辅助推广落地。
- **统一错误提示**：所有数据获取失败时都会弹出错误消息，并提供重新加载入口。

## 开发环境

- Node.js 18+
- pnpm / npm / yarn 任意包管理器（项目默认使用 npm 脚本）

## 快速开始

```bash
# 安装依赖
yarn install
# 或者 npm install / pnpm install

# 本地开发
yarn dev

# 代码检查
yarn lint

# 构建发布
yarn build
```

> 如使用 npm，请将以上命令中的 `yarn` 替换为 `npm run`；使用 pnpm 同理。

## 代码结构

详细的代码结构说明见 `read-prd-documentation.md`，核心目录如下：

```
src/
├── components/   # 可复用组件
├── stores/       # Pinia 状态管理
├── views/        # 页面视图
├── composables/  # 组合式函数
├── types/        # TypeScript 类型定义
└── utils/        # 通用工具方法
```

## 接口文档

前端所有数据结构与接口交互均以 `docs/openapi.json` 为准。主要说明：

- 列表接口返回的数据通常包含 `items`、`total` 等分页字段。
- 详情接口返回单个实体对象，均包含时间戳与激活状态字段。
- 发生业务错误时，接口会返回 `success: false` 与 `message` 字段，前端会自动展示。

## 设计规范

- **交互**：所有关键操作均提供确认弹窗与 Loading 状态，防止误操作。
- **提示**：失败请求通过 Element Plus 的 `ElMessage` 统一提示，同时在页面内展示告警条。
- **注释**：仓库中所有核心逻辑均附带中文注释，便于后端工程师理解与维护。

## 常见问题

1. **为什么请求失败时会有两处提示？**
   - Axios 拦截器会先弹出气泡提示，同时页面局部的 `el-alert` 会显示可重试的按钮，保证用户不会错过错误信息。
2. **如何扩展内容类型？**
   - 在“内容类型配置”页面新增类型即可，前端会自动同步类型列表并更新表单。
3. **如何调整子项目排序？**
   - 在项目详情页点击“调整排序”按钮，前端会调用 `/sub-projects/reorder` 接口并刷新本地缓存。

如需进一步了解业务流程，可查阅仓库根目录下的 `PRD.md` 文件。
